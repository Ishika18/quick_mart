<form class="container" id="preferences" method="POST"> {% csrf_token %}
    <!-- Example row of columns -->
    <div class="row">
      <div class="col-sm-4">
        <div class="checkbox">
          <label><input id='vegan' type="checkbox" value="" name="vegan"> Vegan</label>
        </div>
        <div class="checkbox">
          <label><input id='vegetarian' type="checkbox" value="" name="vegetarian"> Vegetarian</label>
        </div>
        <div class="checkbox">
          <label><input id='gluten-free' type="checkbox" value="" name="gluten-free"> Gluten Free</label>
        </div>
        <div class="checkbox">
          <label><input id='wheat-free' type="checkbox" value="" name="wheat-free"> Wheat Free</label>
        </div>
        <div class="checkbox">
          <label><input id='tree-nut-free' type="checkbox" value="" name="tree-nut-free"> Tree Nut Free</label>
        </div>
        <div class="checkbox">
          <label><input id='soy-free' type="checkbox" value="" name="soy-free"> Soy Free</label>
        </div>
        <div class="checkbox">
          <label><input id='shellfish-free' type="checkbox" value="" name="shellfish-free"> Shellfish Free</label>
        </div>
        <div class="checkbox">
          <label><input id='sesame-free' type="checkbox" value="" name="sesame-free"> Sesame Free</label>
        </div>
      </div>
      <div class="col-sm-4">
        <div class="checkbox">
          <label><input id='low-sugar' type="checkbox" value="" name="low-sugar"> Low Sugar</label>
        </div>
        <div class="checkbox">
          <label><input id='no-oil-added' type="checkbox" value="" name="no-oil-added"> No Oil Added</label>
        </div>
        <div class="checkbox">
          <label><input id='mustard-free' type="checkbox" value="" name="mustard-free"> Mustard Free</label>
        </div>
        <div class="checkbox">
          <label><input id='lupine-free' type="checkbox" value="" name="lupine-free"> Lupine Free</label>
        </div>
        <div class="checkbox">
          <label><input id='kosher' type="checkbox" value="" name="kosher"> Kosher</label>
        </div>
        <div class="checkbox">
          <label><input id='diary-free' type="checkbox" value="" name="diary-free"> Diary Free</label>
        </div>
        <div class="checkbox">
          <label><input id='egg-free' type="checkbox" value="" name="egg-free"> Egg Free</label>
        </div>
        <div class="checkbox">
          <label><input id='fish-free' type="checkbox" value="" name="fish-free"> Fish Free</label>
        </div>
      </div>
      <div class="col-sm-4">
          <div class="checkbox">
          <label><input id='fodmap-free' type="checkbox" value="" name="fodmap-free"> Fodmap Free</label>
        </div>
        <div class="checkbox">
          <label><input id='alcohol-free' type="checkbox" value="" name="alcohol-free"> Alcohol Free</label>
        </div>
        <div class="checkbox">
          <label><input id='celery-free' type="checkbox" value="" name="celery-free"> Celery Free</label>
        </div>
        <div class="checkbox">
          <label><input id='crustacean-free' type="checkbox" value="" name="crustacean-free"> Crustacean Free</label>
        </div>
        <div class="checkbox">
          <label><input id='red-meat-free' type="checkbox" value="" name="red-meat-free"> Red Meat Free</label>
        </div>
        <div class="checkbox">
          <label><input id='pork-free' type="checkbox" value="" name="pork-free"> Pork Free</label>
        </div>
        <div class="checkbox">
          <label><input id='pecatarian' type="checkbox" value="" name="pecatarian"> Pecatarian</label>
        </div>
        <div class="checkbox">
          <label><input id='peanut-free' type="checkbox" value="" name="peanut-free"> Peanut Free</label>
        </div>
      </div>
    </div>

    <hr>

</form> <!-- /container -->

{# event listener for checkboxes #}
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {

        $.ajaxSetup({
          headers: { "X-CSRFToken": '{{csrf_token}}' }
        });

        $("#preferences").on("change", "input:checkbox", function () {
            $.ajax({
                data: $("#preferences").serialize(),
                type: "POST",
                url: $(this).attr('action'),
                success: function(response) {
                    console.log("we submitted a form")
                },
                error: function(e) {
                   console.log(e);
                }
            });
        return false;
        });
    });
</script>